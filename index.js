const _0x58de8d=_0x51ab;function _0x2ce7(){const _0x352a41=['NEZHA_PORT','79343TRNSIY','https://speed.cloudflare.com/meta','net','https://arm64.ssss.nyc.mn/v1','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','1205675mqNqOI','Answer','Hug','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','WSPATH','8.8.4.4','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','true','--tls','aarch64','UUID','index.html','url','1.1.1.1','listen','reduce','catch','readUInt16BE','Unknown','&path=%2F','NAME','data','connect','Not\x20Found\x0a','then','readUInt8','from','Automatic\x20Access\x20Task\x20added\x20successfully','error','arch','sha224','42HsWHHf','close','pop','text/plain','test','split','1368yvaHIh','text/html','toString','npm','2096','includes','log','country','7PGhjwZ','decode','type','unlink','2083','npm\x20running\x20error:','https://dns.google/resolve?name=','update','AUTO_ACCESS','application/json','pipe','http','finish','2qeZHYD','send','&fp=chrome&type=ws&host=','every','false','concat','https://oooo.serv00.net/add-url','978329aXobfZ','\x20with\x20all\x20DNS\x20servers','npm\x20download\x20successfully','sub','config.yaml','buffer','trim','chmod\x20+x\x20npm','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','replace','utf-8','DOMAIN','application/dns-json','write','443','3508203JpemBi','path','join','8443','writeHead','\x20-p\x20','map',':443?encryption=none&security=tls&sni=','&type=A','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','substr',':443?security=tls&sni=','arm','writeFileSync','createWriteStream','end','readFile','get','child_process','2053','trojan://','2087','PORT','length','https://','Server','connection','10765592NtexHa','vless://','NEZHA_KEY','find','slice','207iJgVkA','once','Server\x20is\x20running\x20on\x20port\x20','https://arm64.ssss.nyc.mn/agent','/bin/bash','post','base64','message','407990HpGUFm','axios','env','asOrganization','https://amd64.ssss.nyc.mn/v1','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','utf8','Hello\x20world!','6534096eIlLWE'];_0x2ce7=function(){return _0x352a41;};return _0x2ce7();}(function(_0xb7ece1,_0x971e7a){const _0x16d82e=_0x51ab,_0x56dfb5=_0xb7ece1();while(!![]){try{const _0x8e7d70=parseInt(_0x16d82e(0xcd))/0x1+parseInt(_0x16d82e(0xc6))/0x2*(-parseInt(_0x16d82e(0xdc))/0x3)+parseInt(_0x16d82e(0x10c))/0x4+parseInt(_0x16d82e(0x113))/0x5*(-parseInt(_0x16d82e(0xab))/0x6)+parseInt(_0x16d82e(0xb9))/0x7*(parseInt(_0x16d82e(0xf7))/0x8)+-parseInt(_0x16d82e(0xfc))/0x9*(parseInt(_0x16d82e(0x104))/0xa)+parseInt(_0x16d82e(0x10e))/0xb*(parseInt(_0x16d82e(0xb1))/0xc);if(_0x8e7d70===_0x971e7a)break;else _0x56dfb5['push'](_0x56dfb5['shift']());}catch(_0x4638c4){_0x56dfb5['push'](_0x56dfb5['shift']());}}}(_0x2ce7,0xf042f));const os=require('os'),http=require(_0x58de8d(0xc4)),fs=require('fs'),axios=require(_0x58de8d(0x105)),net=require(_0x58de8d(0x110)),path=require(_0x58de8d(0xdd)),crypto=require('crypto'),{Buffer}=require(_0x58de8d(0xd2)),{exec,execSync}=require(_0x58de8d(0xee)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x58de8d(0x106)][_0x58de8d(0x11d)]||'be096e87-40c7-496d-8a08-9da67ad26726',NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x58de8d(0x106)][_0x58de8d(0x10d)]||'',NEZHA_KEY=process[_0x58de8d(0x106)][_0x58de8d(0xf9)]||'',DOMAIN=process[_0x58de8d(0x106)][_0x58de8d(0xd8)]||'1234.abc.com',AUTO_ACCESS=process[_0x58de8d(0x106)][_0x58de8d(0xc1)]||!![],WSPATH=process['env'][_0x58de8d(0x117)]||UUID[_0x58de8d(0xfb)](0x0,0x8),SUB_PATH=process[_0x58de8d(0x106)]['SUB_PATH']||_0x58de8d(0xd0),NAME=process['env'][_0x58de8d(0x127)]||_0x58de8d(0x115),PORT=process[_0x58de8d(0x106)][_0x58de8d(0xf2)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x16fc50=_0x58de8d;try{const _0xc652fc=await axios[_0x16fc50(0xed)](_0x16fc50(0x10f)),_0x509ac7=_0xc652fc['data'];ISP=(_0x509ac7[_0x16fc50(0xb8)]+'-'+_0x509ac7[_0x16fc50(0x107)])[_0x16fc50(0xd6)](/ /g,'_');}catch(_0x12e3d8){ISP=_0x16fc50(0x125);}};GetISP();function _0x51ab(_0x57582e,_0x4dfb93){const _0x2ce775=_0x2ce7();return _0x51ab=function(_0x51ab98,_0x4536e0){_0x51ab98=_0x51ab98-0xab;let _0x2b3d07=_0x2ce775[_0x51ab98];return _0x2b3d07;},_0x51ab(_0x57582e,_0x4dfb93);}const httpServer=http['createServer']((_0x5a7f52,_0xe4db5b)=>{const _0x69e218=_0x58de8d;if(_0x5a7f52['url']==='/'){const _0x5234d9=path[_0x69e218(0xde)](__dirname,_0x69e218(0x11e));fs[_0x69e218(0xec)](_0x5234d9,_0x69e218(0x10a),(_0x50a4bc,_0x3b7c86)=>{const _0x13f0b6=_0x69e218;if(_0x50a4bc){_0xe4db5b[_0x13f0b6(0xe0)](0xc8,{'Content-Type':_0x13f0b6(0xb2)}),_0xe4db5b[_0x13f0b6(0xeb)](_0x13f0b6(0x10b));return;}_0xe4db5b['writeHead'](0xc8,{'Content-Type':'text/html'}),_0xe4db5b['end'](_0x3b7c86);});return;}else{if(_0x5a7f52[_0x69e218(0x11f)]==='/'+SUB_PATH){const _0x209ca0=_0x69e218(0xf8)+UUID+'@'+DOMAIN+_0x69e218(0xe3)+DOMAIN+_0x69e218(0xc8)+DOMAIN+_0x69e218(0x126)+WSPATH+'#'+NAME+'-'+ISP,_0x227d11=_0x69e218(0xf0)+UUID+'@'+DOMAIN+_0x69e218(0xe7)+DOMAIN+_0x69e218(0xc8)+DOMAIN+_0x69e218(0x126)+WSPATH+'#'+NAME+'-'+ISP,_0x3dcdea=_0x209ca0+'\x0a'+_0x227d11,_0x5f3f70=Buffer[_0x69e218(0x12d)](_0x3dcdea)[_0x69e218(0xb3)](_0x69e218(0x102));_0xe4db5b['writeHead'](0xc8,{'Content-Type':_0x69e218(0xae)}),_0xe4db5b[_0x69e218(0xeb)](_0x5f3f70+'\x0a');}else _0xe4db5b[_0x69e218(0xe0)](0x194,{'Content-Type':_0x69e218(0xae)}),_0xe4db5b[_0x69e218(0xeb)](_0x69e218(0x12a));}}),wss=new WebSocket[(_0x58de8d(0xf5))]({'server':httpServer}),uuid=UUID[_0x58de8d(0xd6)](/-/g,''),DNS_SERVERS=[_0x58de8d(0x118),_0x58de8d(0x120)];function resolveHost(_0xff963b){return new Promise((_0x748ee7,_0xce5354)=>{const _0x84c0a5=_0x51ab;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x84c0a5(0xaf)](_0xff963b)){_0x748ee7(_0xff963b);return;}let _0x4fe2b3=0x0;function _0x4b9929(){const _0x589703=_0x84c0a5;if(_0x4fe2b3>=DNS_SERVERS['length']){_0xce5354(new Error('Failed\x20to\x20resolve\x20'+_0xff963b+_0x589703(0xce)));return;}const _0x1370e2=DNS_SERVERS[_0x4fe2b3];_0x4fe2b3++;const _0x3fe621=_0x589703(0xbf)+encodeURIComponent(_0xff963b)+_0x589703(0xe4);axios[_0x589703(0xed)](_0x3fe621,{'timeout':0x1388,'headers':{'Accept':_0x589703(0xd9)}})['then'](_0x29a16f=>{const _0x29ee9a=_0x589703,_0x1625e5=_0x29a16f[_0x29ee9a(0x128)];if(_0x1625e5['Status']===0x0&&_0x1625e5[_0x29ee9a(0x114)]&&_0x1625e5['Answer'][_0x29ee9a(0xf3)]>0x0){const _0x3f1858=_0x1625e5[_0x29ee9a(0x114)][_0x29ee9a(0xfa)](_0xdb648c=>_0xdb648c[_0x29ee9a(0xbb)]===0x1);if(_0x3f1858){_0x748ee7(_0x3f1858[_0x29ee9a(0x128)]);return;}}_0x4b9929();})['catch'](_0x41375c=>{_0x4b9929();});}_0x4b9929();});}function handleVlessConnection(_0xe7ce27,_0x4899a0){const _0x565698=_0x58de8d,[_0x2fe201]=_0x4899a0,_0x95a3d8=_0x4899a0[_0x565698(0xfb)](0x1,0x11);if(!_0x95a3d8[_0x565698(0xc9)]((_0x277619,_0xbaa642)=>_0x277619==parseInt(uuid['substr'](_0xbaa642*0x2,0x2),0x10)))return![];let _0x36b78a=_0x4899a0[_0x565698(0xfb)](0x11,0x12)[_0x565698(0x12c)]()+0x13;const _0x3dfd80=_0x4899a0[_0x565698(0xfb)](_0x36b78a,_0x36b78a+=0x2)[_0x565698(0x124)](0x0),_0x41805f=_0x4899a0[_0x565698(0xfb)](_0x36b78a,_0x36b78a+=0x1)[_0x565698(0x12c)](),_0x305e0d=_0x41805f==0x1?_0x4899a0[_0x565698(0xfb)](_0x36b78a,_0x36b78a+=0x4)[_0x565698(0xde)]('.'):_0x41805f==0x2?new TextDecoder()[_0x565698(0xba)](_0x4899a0[_0x565698(0xfb)](_0x36b78a+0x1,_0x36b78a+=0x1+_0x4899a0['slice'](_0x36b78a,_0x36b78a+0x1)[_0x565698(0x12c)]())):_0x41805f==0x3?_0x4899a0[_0x565698(0xfb)](_0x36b78a,_0x36b78a+=0x10)[_0x565698(0x122)]((_0x225e5e,_0x14702d,_0x15bb05,_0x9a009a)=>_0x15bb05%0x2?_0x225e5e['concat'](_0x9a009a[_0x565698(0xfb)](_0x15bb05-0x1,_0x15bb05+0x1)):_0x225e5e,[])['map'](_0x59054a=>_0x59054a[_0x565698(0x124)](0x0)[_0x565698(0xb3)](0x10))['join'](':'):'';_0xe7ce27[_0x565698(0xc7)](new Uint8Array([_0x2fe201,0x0]));const _0x25aabb=createWebSocketStream(_0xe7ce27);return resolveHost(_0x305e0d)[_0x565698(0x12b)](_0x57b100=>{const _0x368e3e=_0x565698;net[_0x368e3e(0x129)]({'host':_0x57b100,'port':_0x3dfd80},function(){const _0xb41b27=_0x368e3e;this[_0xb41b27(0xda)](_0x4899a0[_0xb41b27(0xfb)](_0x36b78a)),_0x25aabb['on'](_0xb41b27(0x12f),()=>{})[_0xb41b27(0xc3)](this)['on']('error',()=>{})[_0xb41b27(0xc3)](_0x25aabb);})['on'](_0x368e3e(0x12f),()=>{});})['catch'](_0xe56457=>{const _0x110cb4=_0x565698;net[_0x110cb4(0x129)]({'host':_0x305e0d,'port':_0x3dfd80},function(){const _0x1cd0a1=_0x110cb4;this[_0x1cd0a1(0xda)](_0x4899a0[_0x1cd0a1(0xfb)](_0x36b78a)),_0x25aabb['on']('error',()=>{})[_0x1cd0a1(0xc3)](this)['on'](_0x1cd0a1(0x12f),()=>{})[_0x1cd0a1(0xc3)](_0x25aabb);})['on'](_0x110cb4(0x12f),()=>{});}),!![];}function handleTrojanConnection(_0x566045,_0x1ae6c1){const _0x2dd5c8=_0x58de8d;try{if(_0x1ae6c1[_0x2dd5c8(0xf3)]<0x3a)return![];const _0x4397c4=_0x1ae6c1['slice'](0x0,0x38)['toString'](),_0x3b9347=[UUID];let _0x181dae=null;for(const _0x57d436 of _0x3b9347){const _0xcfd57b=crypto['createHash'](_0x2dd5c8(0x131))[_0x2dd5c8(0xc0)](_0x57d436)['digest']('hex');if(_0xcfd57b===_0x4397c4){_0x181dae=_0x57d436;break;}}if(!_0x181dae)return![];let _0x2d4d9b=0x38;_0x1ae6c1[_0x2d4d9b]===0xd&&_0x1ae6c1[_0x2d4d9b+0x1]===0xa&&(_0x2d4d9b+=0x2);const _0xf7ca7=_0x1ae6c1[_0x2d4d9b];if(_0xf7ca7!==0x1)return![];_0x2d4d9b+=0x1;const _0x49fa5e=_0x1ae6c1[_0x2d4d9b];_0x2d4d9b+=0x1;let _0x31560a,_0x28ded2;if(_0x49fa5e===0x1)_0x31560a=_0x1ae6c1['slice'](_0x2d4d9b,_0x2d4d9b+0x4)[_0x2dd5c8(0xde)]('.'),_0x2d4d9b+=0x4;else{if(_0x49fa5e===0x3){const _0x3b5f3d=_0x1ae6c1[_0x2d4d9b];_0x2d4d9b+=0x1,_0x31560a=_0x1ae6c1['slice'](_0x2d4d9b,_0x2d4d9b+_0x3b5f3d)['toString'](),_0x2d4d9b+=_0x3b5f3d;}else{if(_0x49fa5e===0x4)_0x31560a=_0x1ae6c1[_0x2dd5c8(0xfb)](_0x2d4d9b,_0x2d4d9b+0x10)[_0x2dd5c8(0x122)]((_0x44f330,_0x8e7b35,_0x51e299,_0x4f8f89)=>_0x51e299%0x2?_0x44f330[_0x2dd5c8(0xcb)](_0x4f8f89['slice'](_0x51e299-0x1,_0x51e299+0x1)):_0x44f330,[])[_0x2dd5c8(0xe2)](_0x4f9aa6=>_0x4f9aa6['readUInt16BE'](0x0)['toString'](0x10))['join'](':'),_0x2d4d9b+=0x10;else return![];}}_0x28ded2=_0x1ae6c1['readUInt16BE'](_0x2d4d9b),_0x2d4d9b+=0x2;_0x2d4d9b<_0x1ae6c1[_0x2dd5c8(0xf3)]&&_0x1ae6c1[_0x2d4d9b]===0xd&&_0x1ae6c1[_0x2d4d9b+0x1]===0xa&&(_0x2d4d9b+=0x2);const _0x53d207=createWebSocketStream(_0x566045);return resolveHost(_0x31560a)[_0x2dd5c8(0x12b)](_0x78498f=>{const _0x1d560f=_0x2dd5c8;net[_0x1d560f(0x129)]({'host':_0x78498f,'port':_0x28ded2},function(){const _0x550034=_0x1d560f;_0x2d4d9b<_0x1ae6c1[_0x550034(0xf3)]&&this[_0x550034(0xda)](_0x1ae6c1['slice'](_0x2d4d9b)),_0x53d207['on'](_0x550034(0x12f),()=>{})[_0x550034(0xc3)](this)['on'](_0x550034(0x12f),()=>{})[_0x550034(0xc3)](_0x53d207);})['on'](_0x1d560f(0x12f),()=>{});})[_0x2dd5c8(0x123)](_0x58ce75=>{const _0xedb381=_0x2dd5c8;net[_0xedb381(0x129)]({'host':_0x31560a,'port':_0x28ded2},function(){const _0xa12772=_0xedb381;_0x2d4d9b<_0x1ae6c1[_0xa12772(0xf3)]&&this[_0xa12772(0xda)](_0x1ae6c1['slice'](_0x2d4d9b)),_0x53d207['on'](_0xa12772(0x12f),()=>{})[_0xa12772(0xc3)](this)['on'](_0xa12772(0x12f),()=>{})['pipe'](_0x53d207);})['on'](_0xedb381(0x12f),()=>{});}),!![];}catch(_0x2e8f4f){return![];}}wss['on'](_0x58de8d(0xf6),(_0x3864ba,_0x37bedf)=>{const _0x5406a5=_0x58de8d,_0x666d5c=_0x37bedf[_0x5406a5(0x11f)]||'';_0x3864ba[_0x5406a5(0xfd)](_0x5406a5(0x103),_0x53d084=>{const _0x276278=_0x5406a5;if(_0x53d084[_0x276278(0xf3)]>0x11&&_0x53d084[0x0]===0x0){const _0x4d89cd=_0x53d084[_0x276278(0xfb)](0x1,0x11),_0x2030a2=_0x4d89cd['every']((_0x31ef40,_0x3a5ffb)=>_0x31ef40==parseInt(uuid[_0x276278(0xe6)](_0x3a5ffb*0x2,0x2),0x10));if(_0x2030a2){!handleVlessConnection(_0x3864ba,_0x53d084)&&_0x3864ba['close']();return;}}!handleTrojanConnection(_0x3864ba,_0x53d084)&&_0x3864ba[_0x276278(0xac)]();})['on'](_0x5406a5(0x12f),()=>{});});const getDownloadUrl=()=>{const _0x18875c=_0x58de8d,_0xb5568d=os[_0x18875c(0x130)]();return _0xb5568d===_0x18875c(0xe8)||_0xb5568d==='arm64'||_0xb5568d===_0x18875c(0x11c)?!NEZHA_PORT?_0x18875c(0x111):_0x18875c(0xff):!NEZHA_PORT?_0x18875c(0x108):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x10c432=_0x58de8d;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xd2910d=getDownloadUrl(),_0x52ed7a=await axios({'method':_0x10c432(0xed),'url':_0xd2910d,'responseType':'stream'}),_0x3bfa14=fs[_0x10c432(0xea)](_0x10c432(0xb4));return _0x52ed7a['data']['pipe'](_0x3bfa14),new Promise((_0x7e2365,_0x278548)=>{const _0x43d08d=_0x10c432;_0x3bfa14['on'](_0x43d08d(0xc5),()=>{const _0x5ea300=_0x43d08d;console[_0x5ea300(0xb7)](_0x5ea300(0xcf)),exec(_0x5ea300(0xd4),_0x9dba2e=>{if(_0x9dba2e)_0x278548(_0x9dba2e);_0x7e2365();});}),_0x3bfa14['on']('error',_0x278548);});}catch(_0x3c5309){throw _0x3c5309;}},runnz=async()=>{const _0x35267a=_0x58de8d;try{const _0x5f3ed6=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x35267a(0xd7)});if(_0x5f3ed6[_0x35267a(0xd3)]()!==''){console['log']('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x52d190){}await downloadFile();let _0x23f92c='',_0x75f251=[_0x35267a(0xdb),_0x35267a(0xdf),_0x35267a(0xb5),_0x35267a(0xf1),_0x35267a(0xbd),_0x35267a(0xef)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x6609da=_0x75f251[_0x35267a(0xb6)](NEZHA_PORT)?_0x35267a(0x11b):'';_0x23f92c='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x35267a(0xe1)+NEZHA_KEY+'\x20'+_0x6609da+_0x35267a(0x119);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x537e79=NEZHA_SERVER[_0x35267a(0xb6)](':')?NEZHA_SERVER[_0x35267a(0xb0)](':')[_0x35267a(0xad)]():'',_0x595dc5=_0x75f251['includes'](_0x537e79)?_0x35267a(0x11a):_0x35267a(0xca),_0x2261f2='client_secret:\x20'+NEZHA_KEY+_0x35267a(0x112)+NEZHA_SERVER+_0x35267a(0x109)+_0x595dc5+_0x35267a(0x116)+UUID;fs[_0x35267a(0xe9)](_0x35267a(0xd1),_0x2261f2);}_0x23f92c=_0x35267a(0xe5);}else{console[_0x35267a(0xb7)](_0x35267a(0xd5));return;}}try{exec(_0x23f92c,{'shell':_0x35267a(0x100)},_0x4e3d49=>{const _0x140149=_0x35267a;if(_0x4e3d49)console[_0x140149(0x12f)](_0x140149(0xbe),_0x4e3d49);else console[_0x140149(0xb7)]('npm\x20is\x20running');});}catch(_0x217ace){console[_0x35267a(0x12f)]('error:\x20'+_0x217ace);}};async function addAccessTask(){const _0x16152c=_0x58de8d;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x578155=_0x16152c(0xf4)+DOMAIN+'/'+SUB_PATH;try{const _0x577bec=await axios[_0x16152c(0x101)](_0x16152c(0xcc),{'url':_0x578155},{'headers':{'Content-Type':_0x16152c(0xc2)}});console[_0x16152c(0xb7)](_0x16152c(0x12e));}catch(_0x3cceb4){}}const delFiles=()=>{const _0xe75adc=_0x58de8d;fs[_0xe75adc(0xbc)]('npm',()=>{}),fs[_0xe75adc(0xbc)]('config.yaml',()=>{});};httpServer[_0x58de8d(0x121)](PORT,()=>{const _0x123e66=_0x58de8d;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x123e66(0xb7)](_0x123e66(0xfe)+PORT);});
